(this["webpackJsonpbeejee-react"]=this["webpackJsonpbeejee-react"]||[]).push([[0],{45:function(e,t,n){},52:function(e,t,n){},55:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(26),s=n.n(c),o=(n(45),n(9)),i=n(8),u=n.n(i),l=n(23),d=n(15),b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},j={validateEmail:function(e){var t=function(e){return/\S+@\S+\.\S+/.test(e)};return 0!==e.length&&t(e.toLowerCase())},validateRequiredField:function(e){return e.length>=3}},O={statuses:{0:"\u0437\u0430\u0434\u0430\u0447\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430",1:"\u0437\u0430\u0434\u0430\u0447\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430, \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0430\u0434\u043c\u0438\u043d\u043e\u043c",10:"\u0437\u0430\u0434\u0430\u0447\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430",11:"\u0437\u0430\u0434\u0430\u0447\u0430 \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0430\u0434\u043c\u0438\u043d\u043e\u043c \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430"},sortTypes:{0:{name:"\u0412\u0440\u0435\u043c\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",sort_field:"id",sort_direction:"asc"},1:{name:"\u0412\u0440\u0435\u043c\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",sort_field:"id",sort_direction:"desc"},3:{name:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",sort_field:"username",sort_direction:"asc"},4:{name:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",sort_field:"username",sort_direction:"desc"},5:{name:"\u041f\u043e\u0447\u0442\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",sort_field:"email",sort_direction:"asc"},6:{name:"\u041f\u043e\u0447\u0442\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",sort_field:"email",sort_direction:"desc"},7:{name:"\u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",sort_field:"status",sort_direction:"asc"},8:{name:"\u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",sort_field:"status",sort_direction:"desc"}}},f={objectToUrl:function(e){return Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")}},h=function e(){var t=this;Object(d.a)(this,e),this._apiBase="https://uxcandy.com/~shapoval/test-task-backend/v2/",this.clearToken=function(){return localStorage.removeItem("token")},this.setToken=function(e){return localStorage.setItem("token",e)},this.getToken=function(){return localStorage.getItem("token")},this.makeRequest=function(){var e=Object(l.a)(u.a.mark((function e(n){var r,a,c,s,o,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]&&i[1],a=i.length>2&&void 0!==i[2]?i[2]:null,c=!(i.length>3&&void 0!==i[3])||i[3],s={},r&&(s.method="POST",s.body=a),e.next=7,fetch("".concat(t._apiBase).concat(n).concat(c?"?developer=ykemer":""),s);case 7:if((o=e.sent).ok){e.next=10;break}throw new Error("Could not fetch ".concat(n,", received ").concat(o.status));case 10:return e.next=12,o.json();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getTasksList=Object(l.a)(u.a.mark((function e(){var n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=r.length>0&&void 0!==r[0]?r[0]:{}).developer="ykemer",e.next=4,t.makeRequest("?".concat(f.objectToUrl(n)),!1,null,!1);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),this.editTask=function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.makeRequest("edit/".concat(n),!0,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.addTask=function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.makeRequest("create",!0,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.login=function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.makeRequest("login",!0,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=n(18),p=n(40),x=n(38),g=(n(52),n(0)),v=function(){return Object(g.jsx)("div",{className:"error-indicator",children:Object(g.jsx)("h1",{children:"Houston, \u0443 \u043d\u0430\u0441 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b"})})},k=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(m.a)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(g.jsx)(v,{}):this.props.children}}]),n}(r.Component),S=a.a.createContext(),T=S.Provider,y=S.Consumer,E=n(19),_=n(35),w=n(39),N=n(4),I="SHOW_SUCCESS",R="HIDE_SUCCESS",A="SHOW_ERROR",L="HIDE_ERROR",F="SHOW_LOADER",C="HIDE_LOADER",D="SHOW_FORM_LOADER",M="HIDE_FORM_LOADER",P="LOGIN",H="LOGOUT",G="REDIRECT",q="SET_LOGIN_FORM_ERRORS",K="SET_ADD_TASK_FORM_ERRORS",U="SET_EDIT_TASK_FORM_ERRORS",W="UPDATE_TASKS",B="SET_TAKS_SEARCH_PARAMS",J="SET_TASKS_LIST",V="SET_TASKS_COUNT",z={globalError:null,globalSuccess:null,loading:!1,formLoading:!1,redirect:null},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(N.a)(Object(N.a)({},e),{},{globalError:t.data});case L:return Object(N.a)(Object(N.a)({},e),{},{globalError:null});case I:return Object(N.a)(Object(N.a)({},e),{},{globalSuccess:t.data});case R:return Object(N.a)(Object(N.a)({},e),{},{globalSuccess:null});case F:return Object(N.a)(Object(N.a)({},e),{},{loading:!0});case C:return Object(N.a)(Object(N.a)({},e),{},{loading:!1});case D:return Object(N.a)(Object(N.a)({},e),{},{formLoading:!0});case M:return Object(N.a)(Object(N.a)({},e),{},{formLoading:!1});case G:return Object(N.a)(Object(N.a)({},e),{},{redirect:t.data});default:return e}},X={loggedIn:!1},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(N.a)(Object(N.a)({},e),{},{loggedIn:!0});case H:return Object(N.a)(Object(N.a)({},e),{},{loggedIn:!1});default:return e}},Z={loginFormErrors:{},addTaskFormErrors:{},editTaskFormErrors:{}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return Object(N.a)(Object(N.a)({},e),{},{addTaskFormErrors:t.data});case q:return Object(N.a)(Object(N.a)({},e),{},{loginFormErrors:t.data});case U:return Object(N.a)(Object(N.a)({},e),{},{editTaskFormErrors:t.data});default:return e}},ee={updateTasks:!1,tasksSearchParams:{page:1},tasksList:[],totalTasks:0},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(N.a)(Object(N.a)({},e),{},{updateTasks:t.data});case J:return Object(N.a)(Object(N.a)({},e),{},{tasksList:t.data});case V:return Object(N.a)(Object(N.a)({},e),{},{totalTasks:t.data});case B:return Object(N.a)(Object(N.a)({},e),{},{tasksSearchParams:t.data});default:return e}},ne=Object(E.b)({common:Q,auth:Y,formErrors:$,tasks:te}),re=n(28),ae=n(3),ce=n(36),se=n.n(ce),oe=function(){return{type:F}},ie=function(){return{type:C}},ue=function(){return{type:D}},le=function(){return{type:M}},de=function(e){return{type:A,data:e}},be=function(e){return{type:I,data:e}},je=function(e){return{type:G,data:e}},Oe=function(){function e(t){Object(d.a)(this,e),this.service=t}return Object(m.a)(e,[{key:"errorMessageSaga",value:u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,e.next=3,Object(ae.d)(de(n));case 3:case"end":return e.stop()}}),e)}))},{key:"successMessageSaga",value:u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,e.next=3,Object(ae.d)(be(n));case 3:case"end":return e.stop()}}),e)}))}]),e}(),fe=function(){return{type:P}},he=function(){return{type:H}},me=n(37),pe=function(e,t){var n,r=Object(N.a)({},e),a={},c=Object(me.a)(t);try{for(c.s();!(n=c.n()).done;){var s=n.value;e[s]&&(a[s]=e[s],delete r[s])}}catch(o){c.e(o)}finally{c.f()}return{formErrors:a,leftErrors:r}},xe=function(e){return pe(e,["username","password"])},ge=function(e){return pe(e,["username","password"])},ve=function(e){return pe(e,["status","text"])},ke=function(e){return{type:q,data:e}},Se=function(e){return{type:K,data:e}},Te=function(e){return{type:U,data:e}},ye=function(){function e(t){Object(d.a)(this,e),this.service=t}return Object(m.a)(e,[{key:"loginSaga",value:u.a.mark((function e(t){var n,r,a,c,s,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params,e.next=3,Object(ae.d)(ue());case 3:return e.next=5,Object(ae.b)(this.service.login,n);case 5:return r=e.sent,a=r.status,c=r.message,e.next=10,Object(ae.d)(ke({}));case 10:if("ok"!==a){e.next=21;break}return e.next=13,Object(ae.d)(be("\u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"));case 13:return e.next=15,Object(ae.b)(this.service.setToken,c.token);case 15:return e.next=17,Object(ae.c)(1e3);case 17:return e.next=19,Object(ae.d)(fe());case 19:e.next=30;break;case 21:return e.next=23,Object(ae.b)(xe,c);case 23:return s=e.sent,o=s.formErrors,i=s.leftErrors,e.next=28,Object(ae.d)(ke(o));case 28:return e.next=30,Object(ae.d)(de(i));case 30:return e.next=32,Object(ae.d)(le());case 32:case"end":return e.stop()}}),e,this)}))},{key:"logoutSaga",value:u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ae.d)(oe());case 2:return e.next=4,Object(ae.d)(be("\u0412\u044b \u0432\u044b\u0448\u043b\u0438 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b"));case 4:return e.next=6,Object(ae.b)(this.service.clearToken);case 6:return e.next=8,Object(ae.c)(1e3);case 8:return e.next=10,Object(ae.d)(ie());case 10:return e.next=12,Object(ae.d)(he());case 12:case"end":return e.stop()}}),e,this)}))}]),e}(),Ee=function(e){return{type:W,data:e}},_e=function(e){return{type:J,data:e}},we=function(e){return{type:V,data:e}},Ne=function(){function e(t){Object(d.a)(this,e),this.service=t}return Object(m.a)(e,[{key:"addTaskSaga",value:u.a.mark((function e(t){var n,r,a,c,s,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params,e.next=3,Object(ae.d)(ue());case 3:return e.next=5,Object(ae.d)(Se({}));case 5:return e.next=7,Object(ae.b)(this.service.addTask,n);case 7:if(r=e.sent,a=r.status,c=r.message,"ok"!==a){e.next=19;break}return e.next=13,Object(ae.d)(be("\u0417\u0430\u0434\u0430\u0447\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"));case 13:return e.next=15,Object(ae.c)(1e3);case 15:return e.next=17,Object(ae.d)(je("/"));case 17:e.next=28;break;case 19:return e.next=21,Object(ae.b)(ge,c);case 21:return s=e.sent,o=s.formErrors,i=s.leftErrors,e.next=26,Object(ae.d)(Se(o));case 26:return e.next=28,Object(ae.d)(de(i));case 28:return e.next=30,Object(ae.d)(le());case 30:case"end":return e.stop()}}),e,this)}))},{key:"editTaskSaga",value:u.a.mark((function e(t){var n,r,a,c,s,o,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.params,e.next=3,Object(ae.d)(ue());case 3:return e.next=5,Object(ae.d)(Te({}));case 5:return e.next=7,Object(ae.b)(this.service.editTask,n,r);case 7:if(a=e.sent,c=a.status,s=a.message,"ok"!==c){e.next=19;break}return e.next=13,Object(ae.d)(be("\u0417\u0430\u0434\u0430\u0447\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"));case 13:return e.next=15,Object(ae.c)(1e3);case 15:return e.next=17,Object(ae.d)(Ee(!0));case 17:e.next=39;break;case 19:if(!s.token||"\u0422\u043e\u043a\u0435\u043d \u0438\u0441\u0442\u0451\u043a"!==s.token&&"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d"!==s.token){e.next=30;break}return e.next=22,Object(ae.d)(he());case 22:return e.next=24,Object(ae.b)(this.service.clearToken);case 24:return e.next=26,Object(ae.d)(de("\u041f\u0440\u043e\u0439\u0434\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044e"));case 26:return e.next=28,Object(ae.d)(je("/login"));case 28:e.next=39;break;case 30:return e.next=32,Object(ae.b)(ve,s);case 32:return o=e.sent,i=o.formErrors,l=o.leftErrors,e.next=37,Object(ae.d)(Te(i));case 37:return e.next=39,Object(ae.d)(de(l));case 39:return e.next=41,Object(ae.d)(le());case 41:case"end":return e.stop()}}),e,this)}))},{key:"tasksListSaga",value:u.a.mark((function e(t){var n,r,a,c,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params,e.next=3,Object(ae.d)(oe());case 3:return e.next=5,Object(ae.d)({type:B,data:n});case 5:return e.next=7,Object(ae.b)(this.service.getTasksList,n);case 7:if(r=e.sent,a=r.status,c=r.message,"ok"!==a){e.next=18;break}return s=c.tasks,o=c.total_task_count,e.next=14,Object(ae.d)(_e(s));case 14:return e.next=16,Object(ae.d)(we(parseInt(o)));case 16:e.next=20;break;case 18:return e.next=20,Object(ae.d)(de(c));case 20:return e.next=22,Object(ae.d)(ie());case 22:case"end":return e.stop()}}),e,this)}))}]),e}(),Ie="SAGA_LOGIN",Re="SAGA_LOGOUT",Ae="SAGA_ADD_TASK",Le="SAGA_EDIT_TASK",Fe="SAGA_GET_TASKS",Ce=function(e){return[Object(ae.e)("SAGA_SHOW_ALERT",[e,e.errorMessageSaga]),Object(ae.e)("SAGA_SHOW_SUCCESS",[e,e.successMessageSaga])]},De=function(e){return[Object(ae.e)(Ie,[e,e.loginSaga]),Object(ae.e)(Re,[e,e.logoutSaga])]},Me=function(e){return[Object(ae.e)(Ae,[e,e.addTaskSaga]),Object(ae.e)(Le,[e,e.editTaskSaga]),Object(ae.e)(Fe,[e,e.tasksListSaga])]},Pe=u.a.mark(Ue);se.a.polyfill();var He=new h,Ge=Ce(new Oe(He)),qe=De(new ye(He)),Ke=Me(new Ne(He));function Ue(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ae.a)([].concat(Object(re.a)(qe),Object(re.a)(Ge),Object(re.a)(Ke)));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),Pe,null,[[0,5]])}var We=Ue,Be=Object(w.a)(),Je=[_.a,Be],Ve=Object(E.d)(ne,E.a.apply(void 0,Je));Ve.sagaTask=Be.run(We);var ze=Ve,Qe=(n(55),n(16)),Xe=n(10),Ye=Object(o.b)((function(e){return{success:e.common.globalSuccess,error:e.common.globalError}}),{commonHideSuccess:function(){return{type:R}},commonHideError:function(){return{type:L}}})((function(e){var t=e.children,n=e.success,a=e.error,c=e.commonHideSuccess,s=e.commonHideError;Object(r.useEffect)((function(){null!=a&&setTimeout((function(){s()}),2e3)}),[a,s]),Object(r.useEffect)((function(){null!=n&&setTimeout((function(){c()}),2e3)}),[n,c]);return Object(g.jsxs)(g.Fragment,{children:[null!==a&&("string"===typeof a?Object(g.jsx)("div",{className:"big-alert alert alert-danger",children:a}):Object.keys(a).length>0?Object(g.jsx)("div",{className:"big-alert alert alert-danger",children:Object(g.jsx)("ul",{children:Object.keys(a).map((function(e){return Object(g.jsx)("li",{children:a[e]},a[e])}))})}):void 0),null!==n&&Object(g.jsx)("div",{className:"big-alert alert alert-success",children:n}),t]})})),Ze=Object(o.b)(null,{authLogin:fe,authLogout:he})((function(e){var t=e.authLogin,n=e.authLogout,a=e.children;return Object(r.useState)((function(){"string"===typeof localStorage.getItem("token")?t():n()}),[]),a})),$e=function(){return{type:Re}},et=Object(o.b)((function(e){return{loggedIn:e.auth.loggedIn}}),{sagaLogout:$e})((function(e){var t=e.loggedIn,n=e.sagaLogout;return Object(g.jsx)("nav",{className:"navbar navbar-expand-xl navbar-dark bg-dark","aria-label":"Sixth navbar example",children:Object(g.jsxs)("div",{className:"container-fluid",children:[Object(g.jsx)(Qe.b,{className:"navbar-brand",to:"/",children:"BeeJees"}),Object(g.jsx)("div",{className:" navbar-collapse",id:"navbarsExample06",children:Object(g.jsxs)("ul",{className:"navbar-nav ml-auto mb-2 mb-xl-0",children:[Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)(Qe.b,{className:"nav-link","aria-current":"page",to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)(Qe.b,{className:"nav-link","aria-current":"page",to:"/add",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"})}),!t&&Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)(Qe.b,{className:"nav-link",to:"/login",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"})}),t&&Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)("button",{className:"btn btn-link nav-link",onClick:n,children:"\u0412\u044b\u0445\u043e\u0434"})})]})})]})})})),tt=Object(o.b)((function(e){return{redirect:e.common.redirect}}),{commonRedirect:je})((function(e){var t=e.children,n=e.redirect,a=e.commonRedirect,c=Object(Xe.h)(),s=Object(Xe.g)();return Object(r.useEffect)((function(){null!==n&&(c.pathname!==n&&s.push(n),a(null))}),[n]),Object(g.jsx)(g.Fragment,{children:t})})),nt=(n(59),function(e){var t=e.children;return Object(g.jsx)(Ye,{children:Object(g.jsx)(Ze,{children:Object(g.jsxs)(tt,{children:[Object(g.jsx)(et,{}),Object(g.jsx)("div",{className:"container",id:"container",children:Object(g.jsx)("div",{className:"bg-light p-5 rounded",id:"main-content",children:Object(g.jsx)("div",{className:"col-sm-12",children:t})})})]})})})}),rt=n(20),at=n(17),ct=function(e){var t=e.name,n=e.label,a=e.placeholder,c=e.type,s=void 0===c?"text":c,o=e.value,i=e.errorText,u=e.validator,l=e.changeInputValue,d=e.options,b=void 0===d?{}:d;Object(r.useEffect)((function(){O(o)}),[o]);var O=function(e){var t=f(e);l(e,t)},f=function(e){switch(u){case"email":return j.validateEmail(e);case"required":return j.validateRequiredField(e);default:return!0}};return Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{htmlFor:t,children:n}),"select"===s?Object(g.jsx)("select",{className:"form-control",id:t,"aria-describedby":"".concat(t,"help"),placeholder:a,onChange:function(e){return O(e.target.value)},defaultValue:o,children:Object.keys(b).map((function(e){return Object(g.jsx)("option",{value:e,children:b[e]})}))}):Object(g.jsx)("input",{type:s,className:"form-control",id:t,"aria-describedby":"".concat(t,"help"),placeholder:a,onChange:function(e){return O(e.target.value)},value:o}),Object(g.jsx)("small",{id:"".concat(t,"help"),className:"form-text text-danger",children:i})]})},st=(n(60),n.p+"static/media/spinner.5cec44dd.svg"),ot=function(){return Object(g.jsx)("div",{className:"spinner",children:Object(g.jsx)("img",{src:st,alt:"Spinner"})})},it=Object(o.b)((function(e){return{loading:e.common.formLoading}}),null)((function(e){var t=e.inputs,n=e.action,a=e.initialState,c=e.header,s=e.buttonText,o=e.errors,i=e.loading,u=Object(r.useState)(a),l=Object(at.a)(u,2),d=l[0],b=l[1];Object(r.useEffect)((function(){for(var e=Object(N.a)({},d),t=0,n=Object.keys(e.errorMessages);t<n.length;t++){var r=n[t];o[r]&&(e.errorMessages[r]=o[r])}b(e)}),[o]);var j=t.map((function(e){var t=e.name,n=e.type;return Object(g.jsx)(ct,Object(N.a)({value:d[t],errorText:d.errorMessages[t],changeInputValue:function(e,n){!function(e,t,n){b((function(r){var a,c=Object(N.a)(Object(N.a)({},r.validatedFields),{},Object(rt.a)({},e,n)),s=Object.keys(c).filter((function(e){return c[e]})).length,o=Object(N.a)(Object(N.a)({},r),{},(a={},Object(rt.a)(a,e,t||""),Object(rt.a)(a,"validatedFields",c),Object(rt.a)(a,"validated",s===Object.keys(c).length),a));return o.errorMessages[e]="",o}))}(t,e,n)}},e),"".concat(t,"-").concat(n))}));return Object(g.jsxs)("div",{children:[c&&Object(g.jsx)("h3",{children:c}),Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(d)},children:[j,i?Object(g.jsx)(ot,{}):Object(g.jsx)("input",{className:"btn btn-primary float-right",disabled:!d.validated,type:"submit",value:s})]})]})})),ut=function(){return function(e){return function(t){return Object(g.jsx)(y,{children:function(n){return Object(g.jsx)(e,Object(N.a)(Object(N.a)({},t),{},{service:n}))}})}}},lt=[{name:"email",validator:"email",label:"\u041f\u043e\u0447\u0442\u0430",type:"email"},{name:"username",validator:"required",label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"},{name:"text",validator:"required",label:"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438"}],dt={email:"",username:"",text:"",validatedFields:{email:!1,username:!1,text:!1},errorMessages:{email:"",username:"",text:""},validated:!1},bt=b(Object(o.b)((function(e){return{errors:e.formErrors.addTaskFormErrors}}),{sagaAddTask:function(e){return{type:Ae,params:e}}}),ut())((function(e){var t=e.errors,n=e.sagaAddTask;return Object(g.jsx)(it,{action:function(e){var t=e.username,r=e.email,a=e.text,c=new FormData;c.append("username",t),c.append("email",r),c.append("text",a),n(c)},inputs:lt,initialState:dt,errors:t,buttonText:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",header:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"})})),jt=[{name:"username",validator:"required",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"},{name:"password",validator:"required",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password"}],Ot={username:"",password:"",validatedFields:{username:!1,password:!1},errorMessages:{username:"",password:""},validated:!1},ft=b(Object(o.b)((function(e){return{loggedIn:e.auth.loggedIn,errors:e.formErrors.loginFormErrors}}),{sagaLogin:function(e){return{type:Ie,params:e}}}),ut())((function(e){var t=e.loggedIn,n=e.sagaLogin,r=e.errors;if(t)return Object(g.jsx)(Xe.a,{to:"/"});return Object(g.jsx)(it,{action:function(e){var t=e.username,r=e.password,a=new FormData;a.append("username",t),a.append("password",r),n(a)},inputs:jt,initialState:Ot,errors:r,buttonText:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",header:"\u0412\u0445\u043e\u0434 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"})})),ht=b(ut(),Object(o.b)((function(e){return{loggedIn:e.auth.loggedIn}}),{sagaLogout:$e}))((function(e){var t=e.loggedIn,n=e.sagaLogout;return Object(r.useState)((function(){return n()}),[]),t?Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u044b\u0448\u043b\u0438 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b"}),Object(g.jsx)("p",{children:"\u0412\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})]}):Object(g.jsx)(Xe.a,{to:"/"})})),mt=Object(o.b)((function(e){return{loading:e.common.loading}}),null)((function(e){var t=e.children;return e.loading?Object(g.jsx)(ot,{}):Object(g.jsx)(g.Fragment,{children:t})})),pt=(n(61),function(e){var t=e.total,n=e.perPage,a=void 0===n?3:n,c=e.page,s=void 0===c?1:c,o=e.changePage,i=Object(r.useState)([]),u=Object(at.a)(i,2),l=u[0],d=u[1];return Object(r.useEffect)((function(){for(var e=Math.max(s-2,1),n=Math.min(s+2,Math.ceil(t/a)),r=[],c=e;c<=n;)r.push(c++);d(r)}),[s,a,t]),t<=a?null:Object(g.jsx)("div",{className:"float-right",children:Object(g.jsx)("nav",{"aria-label":"Page navigation example",children:Object(g.jsx)("ul",{className:"pagination",children:l.map((function(e){var t="page-link ".concat(e===s&&"active");return Object(g.jsx)("li",{className:"page-item",children:Object(g.jsx)("button",{className:t,onClick:function(){e!==s&&o(e)},children:e})},"paginator-page-key-".concat(e))}))})})})}),xt=(n(62),O.sortTypes),gt=function(e){var t=e.onChange,n=e.value,r=void 0===n?0:n;return Object(g.jsx)("div",{className:"col-md-6 col-sm-12 float-right sorter",children:Object(g.jsx)("select",{className:"form-control",value:r,onChange:function(e){return t(e.target.value)},children:Object.keys(xt).map((function(e){var t=xt[e].name;return Object(g.jsx)("option",{value:e,children:t},"task-sorter-".concat(e,"-").concat(t))}))})})},vt=(n(63),O.statuses),kt=[{name:"status",label:"\u0421\u0442\u0430\u0442\u0443\u0441",type:"select",options:vt},{name:"text",validator:"required",label:"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438"}],St={status:"",text:"",validatedFields:{status:!0,text:!0},errorMessages:{status:"",text:""},validated:!1},Tt=b(Object(o.b)((function(e){return{errors:e.formErrors.editTaskFormErrors}}),{sagaEditTask:function(e,t){return{type:Le,id:e,params:t}}}),ut())((function(e){var t=e.id,n=e.username,a=e.email,c=e.text,s=e.status,o=e.number,i=e.loggedIn,u=e.service,l=e.errors,d=e.sagaEditTask,b=Object(r.useState)(!1),j=Object(at.a)(b,2),O=j[0],f=j[1],h=Object(r.useState)(!1),m=Object(at.a)(h,2),p=m[0],x=m[1],v=function(e){var n=e.text,r=e.status;f(!0);var a=new FormData;a.append("text",n),a.append("status",r),a.append("token",u.getToken()),d(t,a)};return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:o}),Object(g.jsx)("td",{children:n}),Object(g.jsx)("td",{children:a}),Object(g.jsx)("td",{children:c}),Object(g.jsx)("td",{children:vt[s]}),i&&Object(g.jsxs)("td",{children:[Object(g.jsx)("button",{onClick:function(){return x(!p)},className:"btn btn-info",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),p&&(St.status=s,St.text=c,Object(g.jsx)("div",{className:"task-edit-row",children:Object(g.jsx)(mt,{children:Object(g.jsx)(it,{loading:O,action:v,inputs:kt,initialState:St,errors:l,buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",header:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438",horizontal:!0})})},"task-editor-".concat(t)))]})]},"task-".concat(t))})),yt=b(Object(o.b)((function(e){return{loggedIn:e.auth.loggedIn,tasks:e.tasks.tasksList,searchParams:e.tasks.tasksSearchParams}}),null),ut())((function(e){var t=e.loggedIn,n=e.tasks,r=e.searchParams.page;return Object(g.jsxs)("table",{className:"table",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{scope:"col",children:"#"}),Object(g.jsx)("th",{scope:"col",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),Object(g.jsx)("th",{scope:"col",children:"\u041f\u043e\u0447\u0442\u0430"}),Object(g.jsx)("th",{scope:"col",children:"\u0422\u0435\u043a\u0441\u0442"}),Object(g.jsx)("th",{scope:"col",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),t&&Object(g.jsx)("th",{scope:"col",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"})]})}),Object(g.jsx)("tbody",{children:n.map((function(e,n){var a=3*(r-1)+n+1;return Object(g.jsx)(Tt,Object(N.a)({number:a,loggedIn:t},e),"task-".concat(e.id,"-").concat(n))}))})]})})),Et=O.sortTypes,_t=b(Object(o.b)((function(e){return{loggedIn:e.auth.loggedIn,update:e.tasks.updateTasks,total:e.tasks.totalTasks}}),{sagaGetTasksList:function(e){return{type:Fe,params:e}},updateTasks:Ee}),ut())((function(e){var t=e.update,n=e.updateTasks,a=e.total,c=e.sagaGetTasksList,s=Object(r.useState)(1),o=Object(at.a)(s,2),i=o[0],u=o[1],l=Object(r.useState)(0),d=Object(at.a)(l,2),b=d[0],j=d[1],O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;u(e),j(t);var n=Et[t],r=n.sort_field,a=n.sort_direction,s={page:e,sort_field:r,sort_direction:a};c(s)};Object(r.useEffect)(O,[]),Object(r.useEffect)((function(){!1!==t&&(n(!1),O())}),[t]);return Object(g.jsx)(mt,{children:a>0?Object(g.jsxs)("div",{className:"table-responsive",children:[Object(g.jsx)(gt,{value:b,onChange:function(e){e!==b&&O(i,e)}}),Object(g.jsx)(yt,{}),Object(g.jsx)(pt,{page:i,perPage:3,total:a,changePage:function(e){O(e)}})]}):Object(g.jsx)("h2",{children:"\u041f\u043e\u043a\u0430 \u043d\u0435\u0442 \u043d\u0438 \u043e\u0434\u043d\u043e\u0439 \u0437\u0430\u0434\u0430\u0447\u0438"})})})),wt=function(){return Object(g.jsx)(Qe.a,{children:Object(g.jsx)(nt,{children:Object(g.jsxs)(Xe.d,{children:[Object(g.jsx)(Xe.b,{path:"/",component:_t,exact:!0}),Object(g.jsx)(Xe.b,{path:"/login",component:ft}),Object(g.jsx)(Xe.b,{path:"/logout",component:ht}),Object(g.jsx)(Xe.b,{path:"/add",component:bt}),Object(g.jsx)(Xe.b,{render:function(){return Object(g.jsx)("h2",{children:"Page not found"})}})]})})})},Nt=new h,It=function(){return Object(g.jsx)(k,{children:Object(g.jsx)(o.a,{store:ze,children:Object(g.jsx)(T,{value:Nt,children:Object(g.jsx)(wt,{})})})})},Rt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(It,{})}),document.getElementById("root")),Rt()}},[[64,1,2]]]);
//# sourceMappingURL=main.f1af8185.chunk.js.map